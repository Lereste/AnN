/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/bcryptjs/index.js":
/*!****************************************!*\
  !*** ./node_modules/bcryptjs/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/bcryptjs/index.js?");

/***/ }),

/***/ "./node_modules/cookie-parser/index.js":
/*!*********************************************!*\
  !*** ./node_modules/cookie-parser/index.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/cookie-parser/index.js?");

/***/ }),

/***/ "./node_modules/dotenv/lib/main.js":
/*!*****************************************!*\
  !*** ./node_modules/dotenv/lib/main.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/dotenv/lib/main.js?");

/***/ }),

/***/ "./node_modules/express/index.js":
/*!***************************************!*\
  !*** ./node_modules/express/index.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/express/index.js?");

/***/ }),

/***/ "./node_modules/jsonwebtoken/index.js":
/*!********************************************!*\
  !*** ./node_modules/jsonwebtoken/index.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/jsonwebtoken/index.js?");

/***/ }),

/***/ "./node_modules/mongoose/index.js":
/*!****************************************!*\
  !*** ./node_modules/mongoose/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/mongoose/index.js?");

/***/ }),

/***/ "./node_modules/multer/index.js":
/*!**************************************!*\
  !*** ./node_modules/multer/index.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/multer/index.js?");

/***/ }),

/***/ "./node_modules/nodemailer/lib/nodemailer.js":
/*!***************************************************!*\
  !*** ./node_modules/nodemailer/lib/nodemailer.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/nodemailer/lib/nodemailer.js?");

/***/ }),

/***/ "./node_modules/validator/index.js":
/*!*****************************************!*\
  !*** ./node_modules/validator/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/validator/index.js?");

/***/ }),

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.App = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst express_1 = tslib_1.__importDefault(__webpack_require__(/*! express */ \"./node_modules/express/index.js\"));\nconst http = tslib_1.__importStar(__webpack_require__(/*! http */ \"http\"));\nconst config_1 = __webpack_require__(/*! ./config */ \"./src/config/index.ts\");\nconst mongoose_1 = tslib_1.__importStar(__webpack_require__(/*! mongoose */ \"./node_modules/mongoose/index.js\"));\nconst databases_1 = __webpack_require__(/*! ./databases */ \"./src/databases/index.ts\");\nconst helmet_1 = tslib_1.__importDefault(__webpack_require__(/*! helmet */ \"./node_modules/helmet/index.cjs\"));\nconst cookie_parser_1 = tslib_1.__importDefault(__webpack_require__(/*! cookie-parser */ \"./node_modules/cookie-parser/index.js\"));\nconst path = __webpack_require__(/*! path */ \"path\");\nclass App {\n    constructor(routes) {\n        this._app = (0, express_1.default)();\n        this._env = config_1.NODE_ENV || \"development\";\n        this._connectToMongooseDatabase(); // step 1\n        this._createServer(); // step 2\n        this._initializeMiddlewares(); // step 3\n        this._initializeRoutes(routes); // step 4\n        // serverless(this._app);\n    }\n    _createServer() {\n        this._server = http.createServer(this._app);\n    }\n    _connectToMongooseDatabase() {\n        if (this._env !== \"production\") {\n            (0, mongoose_1.set)(\"debug\", true);\n        }\n        mongoose_1.default\n            .connect(databases_1.DB_CONNECTION.URL, databases_1.DB_CONNECTION.OPTIONS)\n            .then((con) => {\n            // console.log(con.connection);\n            console.log(\"DB connection successfully !!!\");\n        });\n    }\n    _initializeMiddlewares() {\n        this._app.use(express_1.default.static(path.join(__dirname, \"public\")));\n        this._app.use((0, helmet_1.default)()); // Set security HTTP headers\n        this._app.use(express_1.default.urlencoded({ extended: true })); // parse application/x-www-form-urlencoded\n        this._app.use(express_1.default.json());\n        this._app.use((0, cookie_parser_1.default)());\n    }\n    _initializeRoutes(routes) {\n        routes.forEach((route) => {\n            this._app.use(\"/\", route.router);\n        });\n    }\n    listenServer() {\n        this._server.listen(config_1.APP_PORT, () => {\n            console.log(`🚀 Server is running on port 👉 ${config_1.APP_PORT} 👈`);\n        });\n    }\n}\nexports.App = App;\n\n\n//# sourceURL=webpack://shopdienmay/./src/app.ts?");

/***/ }),

/***/ "./src/config/index.ts":
/*!*****************************!*\
  !*** ./src/config/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar _a;\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.JWT_COOKIE_EXPIRES_IN = exports.JWT_EXPIRES_IN = exports.JWT_SECRET = exports.DATABASE_LOCAL = exports.DATABASE_PORT = exports.APP_HOSTNAME = exports.APP_PORT = exports.NODE_ENV = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst dotenv_1 = tslib_1.__importDefault(__webpack_require__(/*! dotenv */ \"./node_modules/dotenv/lib/main.js\"));\ndotenv_1.default.config({ path: `./${\"development\"}.env` }); // process.env.NODE_ENV is either 'development' or 'production'\n_a = process.env, exports.NODE_ENV = \"development\", exports.APP_PORT = _a.APP_PORT, exports.APP_HOSTNAME = _a.APP_HOSTNAME, exports.DATABASE_PORT = _a.DATABASE_PORT, exports.DATABASE_LOCAL = _a.DATABASE_LOCAL, exports.JWT_SECRET = _a.JWT_SECRET, exports.JWT_EXPIRES_IN = _a.JWT_EXPIRES_IN, exports.JWT_COOKIE_EXPIRES_IN = _a.JWT_COOKIE_EXPIRES_IN;\n\n\n//# sourceURL=webpack://shopdienmay/./src/config/index.ts?");

/***/ }),

/***/ "./src/controllers/auth.controller.ts":
/*!********************************************!*\
  !*** ./src/controllers/auth.controller.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst config_1 = __webpack_require__(/*! ../config */ \"./src/config/index.ts\");\nconst user_model_1 = tslib_1.__importDefault(__webpack_require__(/*! ../models/user.model */ \"./src/models/user.model.ts\"));\nconst appError_1 = tslib_1.__importDefault(__webpack_require__(/*! ../utils/appError */ \"./src/utils/appError.ts\"));\nconst catchAsync_1 = __webpack_require__(/*! ../utils/catchAsync */ \"./src/utils/catchAsync.ts\");\nconst auth_service_1 = tslib_1.__importDefault(__webpack_require__(/*! ../services/auth.service */ \"./src/services/auth.service.ts\"));\nconst email_1 = __webpack_require__(/*! ../utils/email */ \"./src/utils/email.ts\");\nconst crypto = tslib_1.__importStar(__webpack_require__(/*! crypto */ \"crypto\"));\nclass AuthController {\n    constructor() {\n        this.authService = new auth_service_1.default();\n        // private _sendResponseStatus =\n        this.signUp = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // const userExist = await UserModel.exists({ email: request.body.email });\n            const { name, email, role, password, passwordConfirm } = request.body;\n            const userExist = yield user_model_1.default.exists({ email });\n            if (userExist) {\n                throw new appError_1.default(\"This email is already in use. Please use it to log in or select forgot password\", 422);\n            }\n            // const newUser = await User.create(request.body);\n            // Tạo bằng cách này thì server chỉ lưu trữ những fields ở dưới, nếu user nhập nhiều input hơn những fields trên thì nó sẽ không store\n            const newUser = yield user_model_1.default.create({\n                name,\n                email,\n                role,\n                password,\n                passwordConfirm,\n                // passwordChangedAt: request.body.passwordChangedAt,\n            });\n            // hide data for client - still exit in mongoose database\n            // newUser.password = undefined;\n            // newUser.passwordConfirm = undefined;\n            // response.status(201).json({\n            //     status: \"success\",\n            //     message: \"Sign up successfully!\",\n            //     data: {\n            //         user: newUser,\n            //     },\n            // });\n            this.authService.createSendToken(newUser, 200, response, \"Sign up successfully!\");\n        }));\n        this.logIn = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const { email, password } = request.body;\n            // 1) Check if email and password are exit\n            if (!email || !password) {\n                return next(new appError_1.default(\"Please provide email and password!\", 400));\n            }\n            // 2) Check if user exists && password is correct\n            const user = yield user_model_1.default.findOne({ email }).select(\"+password\");\n            const correctPassword = yield this.authService.comparePassword(password, user.password);\n            if (!user || !correctPassword) {\n                return next(new appError_1.default(\"Incorrect email or password\", 401));\n            }\n            this.authService.createSendToken(user, 200, response, \"Login successfully!\");\n        }));\n        this.logOut = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // Vì không thể xoá đc cookie nên ta sẽ ghi đè lên nó\n            response.cookie(\"jwt\", \"loggedout\", {\n                expires: new Date(Date.now() + 10 * 1000),\n                httpOnly: true,\n            });\n            response.status(200).json({\n                status: \"success\",\n            });\n        }));\n        this.protect = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // const { passwordChangedAt } = request.body;\n            // 1) Get the token and check if it is exit\n            const headerAuthorization = request.headers.authorization;\n            let token;\n            if (headerAuthorization && headerAuthorization.startsWith(\"Bearer\")) {\n                token = headerAuthorization.split(\" \")[1];\n            }\n            else if (request.cookies.jwt) {\n                token = request.cookies.jwt;\n            }\n            // token and cookies\n            if (!token) {\n                return next(new appError_1.default(\"You are not logged in! Please log in to get access\", 401));\n            }\n            // 2) Verification token\n            // const decoded = await promisify(jwt.verify)(token, JWT_SECRET);\n            // const decoded = await this._jwtVerifyPromisified(token as string, JWT_SECRET as string) as any;\n            // const decoded = jwt.verify(token, JWT_SECRET) as JwtPayload;\n            console.log(\"check token\", token, config_1.JWT_SECRET);\n            const decoded = (yield this.authService.verifyToken(token, config_1.JWT_SECRET));\n            // 3) Check if user still exists\n            console.log(\"decoded\", decoded); // decoded { id: '668f95607b48d3049303159b', iat: 1720767966, exp: 1728543966 }\n            if (!decoded) {\n                // Delete thằng user này ra khỏi database > cho dù còn token vẫn không login đc > kh làm đc gì\n                return next(new appError_1.default(\"The user belonging to this token does no longer exist.\", 401));\n            }\n            // 4) Check if user changed password after the token (JWT) was issued (expired)\n            // Khi đổi password thì field passwordChangedAt sẽ update thời gian, khi đó ta so sánh nó với thời gian tạo của token\n            const currentUser = yield user_model_1.default.findById(decoded.id);\n            if (this.authService.changedPasswordAfter(decoded.iat, currentUser.passwordChangedAt)) {\n                throw new appError_1.default(\"User recently changed password! Please log in again.\", 401);\n            }\n            // Grant access to protected route\n            request.user = currentUser;\n            response.locals.user = currentUser;\n            next();\n        }));\n        this.isLoggedIn = (request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            if (request.cookies.jwt) {\n                try {\n                    // 1) Verification token\n                    const decoded = (yield this.authService.verifyToken(request.cookies.jwt, config_1.JWT_SECRET));\n                    // 2) Check if user still exists\n                    if (!decoded) {\n                        return next();\n                    }\n                    // 3) Check if user changed password after the token (JWT) was issued (expired)\n                    // Khi đổi password thì field passwordChangedAt sẽ update thời gian, khi đó ta so sánh nó với thời gian tạo của token\n                    const currentUser = yield user_model_1.default.findById(decoded.id);\n                    if (this.authService.changedPasswordAfter(currentUser, currentUser.passwordChangedAt)) {\n                        return next();\n                    }\n                    // There is a logged in user\n                    response.locals.user = currentUser;\n                    return next();\n                }\n                catch (error) {\n                    return next();\n                }\n            }\n            next();\n        });\n        this.restrictTo = (...roles) => {\n            return (request, response, next) => {\n                // roles ['admin', 'lead-guide']\n                if (!roles.includes(request.user.role)) {\n                    return next(new appError_1.default(\"You do not have permission to perform this action\", 403));\n                }\n                next();\n            };\n        };\n        this.forgotPassword = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // 1) Get User based on POSTed email\n            const user = yield user_model_1.default.findOne({ email: request.body.email });\n            if (!user) {\n                return next(new appError_1.default(\"There is no user with that email address!\", 404));\n            }\n            // 2) Generate the random reset token\n            const resetToken = this.authService.createResetPasswordToken();\n            yield user.save({ validateBeforeSave: false });\n            // 3) Send it to the user's email\n            const resetURL = `${request.protocol}://${request.get(\"host\")}/api/v1/users/resetPassword/${resetToken}`;\n            const message = `Forgot your password? Submit a PATCH request with your password and passwordConfirm to: ${resetURL}. \\n If you didn't forget your password. please ignore this email!`;\n            try {\n                yield (0, email_1.sendEmailAsync)({\n                    email: user.email,\n                    subject: \"Your password reset token valid for 10 mins\",\n                    message: message,\n                });\n                response.status(200).json({\n                    status: \"success\",\n                    message: \"Token sent to email!\",\n                });\n            }\n            catch (error) {\n                user.passwordResetToken = undefined; // delete it in database when error\n                user.passwordResetExpires = undefined; // delete it in database when error\n                yield user.save({ validateBeforeSave: false });\n                //   console.log(error.message);\n                return next(new appError_1.default(\"There was an error sending the email. Try again later!\", 500));\n            }\n        }));\n        this.resetPassword = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // 1) Get user based on the token\n            const hashedToken = crypto\n                .createHash(\"sha256\")\n                .update(request.params.token)\n                .digest(\"hex\");\n            const user = yield user_model_1.default.findOne({\n                passwordResetToken: hashedToken,\n                passwordResetExpires: { $gt: Date.now() },\n            });\n            // 2) If token has not expired, and there is user, set the new password\n            if (!user) {\n                return next(new appError_1.default(\"Token is invalid or has expired!\", 400));\n            }\n            user.password = request.body.password;\n            user.passwordConfirm = request.body.passwordConfirm;\n            user.passwordResetToken = undefined; // xóa nó trong database khi cập nhật password thành công ~ token chỉ dùng đc 1 lần\n            user.passwordResetExpires = undefined; // xóa nó trong database khi cập nhật password thành công ~ token chỉ dùng đc 1 lần\n            yield user.save();\n            // 3) Update changePasswordAt property for the user (userModel.js)\n            // 4) Log the user in and send JWT\n            this.authService.createSendToken(user, 200, response, \"Password has been changed! You can now log in.\");\n            //   const loginToken = signToken(user._id);\n            //   response.status(200).json({\n            //     status: \"success\",\n            //     message: \"Password has been changed! You can now log in.\",\n            //     loginToken,\n            //     expiresIn: process.env.JWT_EXPIRES_IN,\n            //   });\n        }));\n        this.updatePassword = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // 1) Get user from Collections\n            const user = yield user_model_1.default.findById(request.user._id).select(\"+password\");\n            console.log('user', user);\n            // 2) Check if POSTed current password is correct\n            // \"admin123\" === \"$2a$12$HD/Bx8BHvtf2nyVhIDsG6OoJEag9qwmipOdPECIQiiB5M84oUfenu\"\n            // So sánh giữa password (mat khau input khi login) với user.password (mk của user đã tạo trước đó trong database)\n            const correctPassword = yield this.authService.comparePassword(request.body.passwordCurrent, user.password);\n            if (!correctPassword) {\n                return next(new appError_1.default(\"Your current password is wrong!\", 401));\n            }\n            // 3) If correct, update password and passwordConfirm fields\n            user.password = request.body.password;\n            user.passwordConfirm = request.body.passwordConfirm;\n            yield user.save();\n            // Note: User.findByIdAndUpdate will NOT work as intended! because passwordConfirm validation only work on CREATE or SAVE, in this case it is UPDATE\n            // 4) Log user in, send JWT\n            this.authService.createSendToken(user, 200, response, \"Update to new password successfully!\");\n        }));\n    }\n}\nexports[\"default\"] = AuthController;\n\n\n//# sourceURL=webpack://shopdienmay/./src/controllers/auth.controller.ts?");

/***/ }),

/***/ "./src/controllers/product.controller.ts":
/*!***********************************************!*\
  !*** ./src/controllers/product.controller.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst factory_service_1 = tslib_1.__importDefault(__webpack_require__(/*! ../services/factory.service */ \"./src/services/factory.service.ts\"));\nconst product_model_1 = tslib_1.__importDefault(__webpack_require__(/*! ../models/product.model */ \"./src/models/product.model.ts\"));\nclass ProductController {\n    constructor() {\n        this.factoryService = new factory_service_1.default();\n        this.createMessage = \"Created Product Successfully!\";\n        this.updatedMessage = \"Created Product Successfully!\";\n        this.deleteddMessage = \"Deleted Product Successfully!\";\n        // public createUser = async (req: Request, res: Response, next: NextFunction) => {\n        // }\n        this.getAllProducts = this.factoryService.getAll(product_model_1.default);\n        this.getProductById = this.factoryService.getOne(product_model_1.default);\n        this.createNewProduct = this.factoryService.createOne(product_model_1.default, this.createMessage);\n        this.updateProductById = this.factoryService.updateOne(product_model_1.default, this.updatedMessage);\n        this.delelteProductById = this.factoryService.deleteOne(product_model_1.default, this.deleteddMessage);\n    }\n}\nexports[\"default\"] = ProductController;\n\n\n//# sourceURL=webpack://shopdienmay/./src/controllers/product.controller.ts?");

/***/ }),

/***/ "./src/controllers/user.controller.ts":
/*!********************************************!*\
  !*** ./src/controllers/user.controller.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst user_model_1 = tslib_1.__importDefault(__webpack_require__(/*! ../models/user.model */ \"./src/models/user.model.ts\"));\nconst factory_service_1 = tslib_1.__importDefault(__webpack_require__(/*! ../services/factory.service */ \"./src/services/factory.service.ts\"));\nclass UserController {\n    constructor() {\n        this.factoryService = new factory_service_1.default();\n        this.createMessage = \"Created User Successfully!\";\n        // public createUser = async (req: Request, res: Response, next: NextFunction) => {\n        // }\n        // public createNewUser = this.factoryService.createOne(UserModel, this.createMessage);\n        this.getAllUsers = this.factoryService.getAll(user_model_1.default);\n    }\n}\nexports[\"default\"] = UserController;\n\n\n//# sourceURL=webpack://shopdienmay/./src/controllers/user.controller.ts?");

/***/ }),

/***/ "./src/databases/index.ts":
/*!********************************!*\
  !*** ./src/databases/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.DB_CONNECTION = void 0;\nconst config_1 = __webpack_require__(/*! ../config */ \"./src/config/index.ts\");\nexports.DB_CONNECTION = {\n    URL: `${config_1.DATABASE_LOCAL}`,\n    OPTIONS: {\n        // useNewUrlParser: true,\n        // useUnifiedTopology: true,\n        dbName: 'ecommerce'\n    },\n};\n\n\n//# sourceURL=webpack://shopdienmay/./src/databases/index.ts?");

/***/ }),

/***/ "./src/middlewares/resize-images.middleware.ts":
/*!*****************************************************!*\
  !*** ./src/middlewares/resize-images.middleware.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst sharp_1 = tslib_1.__importDefault(__webpack_require__(/*! sharp */ \"./node_modules/sharp/lib/index.js\"));\nconst catchAsync_1 = __webpack_require__(/*! ../utils/catchAsync */ \"./src/utils/catchAsync.ts\");\nconst resizeImageList = (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {\n    const requestFiles = request.files;\n    // if (!requestFiles.image || !requestFiles.imageList) return;\n    // image aka product image\n    if (requestFiles.image) {\n        if (request.params.id) {\n            request.body.image = `image-of-id-${request.params.id}-updatedAt-${Date.now()}.jpeg`;\n        }\n        else {\n            request.body.image = `image-createdAt-${Date.now()}.jpeg`;\n        }\n        yield (0, sharp_1.default)(requestFiles.image[0].buffer)\n            .resize(2000, 1333)\n            .toFormat(\"jpeg\")\n            .jpeg({ quality: 90 })\n            .toFile(`public/img/products/${request.body.image}`);\n    }\n    if (requestFiles.imageList) {\n        request.body.imageList = [];\n        yield Promise.all(requestFiles.imageList.map((file, idx) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {\n            let fileName;\n            if (request.params.id) {\n                fileName = `imageList-of-id-${request.params.id}-updatedAt-${Date.now()}-index-${idx + 1}.jpeg`;\n            }\n            else {\n                fileName = `imageList-createdAt-${Date.now()}-index-${idx + 1}.jpeg`;\n            }\n            yield (0, sharp_1.default)(file.buffer)\n                .resize(2000, 1333)\n                .toFormat(\"jpeg\")\n                .jpeg({ quality: 90 })\n                .toFile(`public/img/products/${fileName}`);\n            request.body.imageList.push(fileName);\n        })));\n    }\n    next();\n}));\nexports[\"default\"] = resizeImageList;\n\n\n//# sourceURL=webpack://shopdienmay/./src/middlewares/resize-images.middleware.ts?");

/***/ }),

/***/ "./src/middlewares/upload-images.middleware.ts":
/*!*****************************************************!*\
  !*** ./src/middlewares/upload-images.middleware.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.uploadImages = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst multer_1 = tslib_1.__importDefault(__webpack_require__(/*! multer */ \"./node_modules/multer/index.js\"));\nconst appError_1 = tslib_1.__importDefault(__webpack_require__(/*! ../utils/appError */ \"./src/utils/appError.ts\"));\nconst multerStorage = multer_1.default.memoryStorage(); // save in memory\nconst multerFilter = (request, file, cb) => {\n    if (file.mimetype.startsWith('image')) {\n        cb(null, true);\n    }\n    else {\n        cb(new appError_1.default('This file is not image', 400), false);\n    }\n};\nconst upload = (0, multer_1.default)({\n    storage: multerStorage,\n    fileFilter: multerFilter\n});\nexports.uploadImages = upload.fields([\n    // name is the key  in req.files\n    { name: 'image', maxCount: 1 },\n    { name: 'imageList', maxCount: 3 }\n]);\n// export default uploadImages;\n\n\n//# sourceURL=webpack://shopdienmay/./src/middlewares/upload-images.middleware.ts?");

/***/ }),

/***/ "./src/models/product.model.ts":
/*!*************************************!*\
  !*** ./src/models/product.model.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst mongoose_1 = __webpack_require__(/*! mongoose */ \"./node_modules/mongoose/index.js\");\nconst ProductSchema = new mongoose_1.Schema({\n    name: {\n        type: String,\n        required: [true, \"A Product must have a name\"],\n        maxlength: [50, 'A product name must have less or equal than 50 characters'],\n        minlength: [10, 'A product name must have more or equal then 10 characters'],\n    },\n    description: {\n        type: String,\n    },\n    image: {\n        type: String,\n        default: 'default-product-image.jpeg'\n    },\n    imageList: [String],\n    categories: {\n        type: Array,\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    sale_price: {\n        type: Number,\n    }\n});\n// Cách 2: \nProductSchema.set('toJSON', {\n    virtuals: true, // create: key id\n    versionKey: false, // delete key: _v\n    transform: function (doc, ret) {\n        ret.id = ret._id;\n        delete ret._id; // delete key: _id\n    }\n});\nconst ProductModel = (0, mongoose_1.model)('Product', ProductSchema);\nexports[\"default\"] = ProductModel;\n\n\n//# sourceURL=webpack://shopdienmay/./src/models/product.model.ts?");

/***/ }),

/***/ "./src/models/user.model.ts":
/*!**********************************!*\
  !*** ./src/models/user.model.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst mongoose_1 = __webpack_require__(/*! mongoose */ \"./node_modules/mongoose/index.js\");\nconst validator_1 = tslib_1.__importDefault(__webpack_require__(/*! validator */ \"./node_modules/validator/index.js\"));\nconst bcryptjs_1 = tslib_1.__importDefault(__webpack_require__(/*! bcryptjs */ \"./node_modules/bcryptjs/index.js\"));\nconst UserSchema = new mongoose_1.Schema({\n    name: {\n        type: String,\n        required: [true, \"A User must have a name\"],\n        maxlength: [40, 'A user name must have less or equal than 40 characters'],\n        minlength: [10, 'A user name must have more or equal then 10 characters'],\n    },\n    email: {\n        type: String,\n        trim: true,\n        unique: true,\n        lowercase: true,\n        validate: [validator_1.default.isEmail, \"Please provide a valid email\"]\n    },\n    photo: {\n        type: String,\n    },\n    role: {\n        type: String,\n        enum: ['admin', 'user', 'guest'],\n        default: 'guest'\n    },\n    password: {\n        type: String,\n        required: [true, \"A user must have a password\"],\n        minlength: 8,\n        select: false\n    },\n    passwordConfirm: {\n        type: String,\n        required: [true, \"Please confirm your password\"],\n        validate: {\n            // Validation only work on CREATE or SAVE - await User.create(request.body);\n            validator: function (value) {\n                return value === this.password;\n            },\n            message: \"Password Confirm do not match with Password\"\n        }\n    },\n    passwordChangedAt: Date,\n    passwordResetToken: String,\n    passwordResetExpires: Date,\n    active: {\n        type: Boolean,\n        default: true,\n        select: false\n    }\n});\nUserSchema.set('toJSON', {\n    virtuals: true, // create: key id\n    versionKey: false, // delete key: _v\n    transform: function (doc, ret) {\n        ret.id = ret._id;\n        delete ret._id; // delete key: _id\n    }\n});\nUserSchema.pre('save', function (next) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n        // Chỉ chạy encrypt khi nào password của user modify (vd: email thay đổi thì kh cần chạy)\n        if (!this.isModified('password'))\n            return next();\n        // hash ở đây là async func, không muốn nó là sync bởi vì nếu nó chạy lâu thì sẽ block the event loop and prevent other users\n        this.password = yield bcryptjs_1.default.hash(this.password, 12);\n        // Ở đây chúng ta phải set passwordConfirm là undefind (xoá nó trong client và moongose) bởi vì password đã đc hash trước khi save\n        // Nhập password và passwordConfirm phải giống nhau > hash password > nên không cần thằng confirmPassword nữa > save \n        // passwordConfirm có validate là required (required của input chứ không phải cần required thêm ở database)\n        this.passwordConfirm = undefined;\n        next();\n    });\n});\n// Documment middleware: only runs before .save() and .create() - not for UPDATE\nUserSchema.pre('save', function (next) {\n    if (!this.isModified('password') || this.isNew)\n        return next();\n    this.passwordChangedAt = Date.now() - 1000; // trừ đi 1s vì lúc đó token mới khi user update password đã được chạy xong\n    next();\n});\n// UserSchema.methods.comparePassword = async function (candidatePassword: string, userPassword: string) {\n//     return await bcrypt.compare(candidatePassword, userPassword)\n// }\nconst UserModel = (0, mongoose_1.model)('User', UserSchema);\nexports[\"default\"] = UserModel;\n\n\n//# sourceURL=webpack://shopdienmay/./src/models/user.model.ts?");

/***/ }),

/***/ "./src/routes/product.routes.ts":
/*!**************************************!*\
  !*** ./src/routes/product.routes.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst express_1 = __webpack_require__(/*! express */ \"./node_modules/express/index.js\");\nconst product_controller_1 = tslib_1.__importDefault(__webpack_require__(/*! ../controllers/product.controller */ \"./src/controllers/product.controller.ts\"));\nconst upload_images_middleware_1 = __webpack_require__(/*! ../middlewares/upload-images.middleware */ \"./src/middlewares/upload-images.middleware.ts\");\nconst resize_images_middleware_1 = tslib_1.__importDefault(__webpack_require__(/*! ../middlewares/resize-images.middleware */ \"./src/middlewares/resize-images.middleware.ts\"));\nconst auth_controller_1 = tslib_1.__importDefault(__webpack_require__(/*! ../controllers/auth.controller */ \"./src/controllers/auth.controller.ts\"));\nclass ProductRouter {\n    constructor() {\n        this.path = '/api/v1/products/';\n        this.router = (0, express_1.Router)();\n        this.productController = new product_controller_1.default();\n        this.authController = new auth_controller_1.default();\n        this.initializeRoutes();\n    }\n    initializeRoutes() {\n        this.router.get(this.path + ':id', this.productController.getProductById);\n        this.router.patch(this.path + ':id', upload_images_middleware_1.uploadImages, resize_images_middleware_1.default, this.productController.updateProductById);\n        this.router.delete(this.path + ':id', this.productController.delelteProductById);\n        this.router.get(this.path, this.authController.protect, this.productController.getAllProducts);\n        this.router.post(this.path, upload_images_middleware_1.uploadImages, resize_images_middleware_1.default, this.productController.createNewProduct);\n    }\n}\nexports[\"default\"] = ProductRouter;\n\n\n//# sourceURL=webpack://shopdienmay/./src/routes/product.routes.ts?");

/***/ }),

/***/ "./src/routes/user.routes.ts":
/*!***********************************!*\
  !*** ./src/routes/user.routes.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst express_1 = __webpack_require__(/*! express */ \"./node_modules/express/index.js\");\nconst user_controller_1 = tslib_1.__importDefault(__webpack_require__(/*! ../controllers/user.controller */ \"./src/controllers/user.controller.ts\"));\nconst auth_controller_1 = tslib_1.__importDefault(__webpack_require__(/*! ../controllers/auth.controller */ \"./src/controllers/auth.controller.ts\"));\nclass UserRouter {\n    constructor() {\n        this.path = '/api/v1/users/';\n        this.router = (0, express_1.Router)();\n        this.userController = new user_controller_1.default();\n        this.authController = new auth_controller_1.default();\n        this.initializeRoutes();\n    }\n    initializeRoutes() {\n        this.router.post(this.path + 'signup', this.authController.signUp);\n        this.router.post(this.path + 'login', this.authController.logIn);\n        this.router.get(this.path + 'logout', this.authController.logOut);\n        this.router.post(this.path + 'forgotPassword', this.authController.forgotPassword);\n        this.router.patch(this.path + 'resetPassword/:token', this.authController.resetPassword);\n        //======= Protect all routes under =======\n        this.router.use(this.authController.protect);\n        this.router.patch(this.path + 'updateMyPassword', this.authController.updatePassword);\n        //======= sa\n        this.router.use(this.authController.restrictTo('admin'));\n        this.router.get(this.path, this.userController.getAllUsers);\n    }\n}\nexports[\"default\"] = UserRouter;\n\n\n//# sourceURL=webpack://shopdienmay/./src/routes/user.routes.ts?");

/***/ }),

/***/ "./src/server.ts":
/*!***********************!*\
  !*** ./src/server.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst app_1 = __webpack_require__(/*! ./app */ \"./src/app.ts\");\nconst user_routes_1 = tslib_1.__importDefault(__webpack_require__(/*! ./routes/user.routes */ \"./src/routes/user.routes.ts\"));\nconst product_routes_1 = tslib_1.__importDefault(__webpack_require__(/*! ./routes/product.routes */ \"./src/routes/product.routes.ts\"));\n// Implement App Router\nconst app = new app_1.App([new user_routes_1.default(), new product_routes_1.default()]);\n// Listen the server\napp.listenServer();\n\n\n//# sourceURL=webpack://shopdienmay/./src/server.ts?");

/***/ }),

/***/ "./src/services/apiFeatures.service.ts":
/*!*********************************************!*\
  !*** ./src/services/apiFeatures.service.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass APIFeatures {\n    constructor(_query, _queryString) {\n        this.query = _query;\n        this.queryString = _queryString;\n    }\n    filter() {\n        // 1A) Basic filter\n        const queryObj = Object.assign({}, this.queryString);\n        console.log('queryObj', queryObj);\n        const excludeFields = ['page', 'sort', 'limit', 'fields'];\n        excludeFields.forEach(element => delete queryObj[element]);\n        // 1B) Advanced filter\n        let queryStr = JSON.stringify(queryObj);\n        queryStr = queryStr.replace(/\\b(gte|gt|lte|lt)\\b/g, match => '$' + `${match}`);\n        this.query = this.query.find(JSON.parse(queryStr));\n        //  let query = Tour.find(JSON.parse(queryStr));\n        return this;\n        // Vd: 127.0.0.1:3000/api/v1/tours?difficulty=easy&duration=9\n    }\n    sort() {\n        // 2) Sorting\n        if (this.queryString.sort) {\n            // Sắp xếp từ bé đến lớn, và ngược lại bằng cách thêm dấu \"-\"\n            // 127.0.0.1:3000/api/v1/tours?sort=price\n            // 127.0.0.1:3000/api/v1/tours?sort=-price\n            // 127.0.0.1:3000/api/v1/tours?price=[lt]=1000&ratingsAverage[gte]=4.7\n            // query = query.sort(request.query.sort);\n            const sortBy = this.queryString.sort.split(',').join(' ');\n            // 127.0.0.1:3000/api/v1/tours?sort=-price,-ratingsAverage\n            console.log('sortBy: ', sortBy); // sortBy: -price -ratingsAverage\n            this.query = this.query.sort(sortBy);\n        }\n        else {\n            this.query = this.query.sort('-createdAt'); // lấy thằng đc tạo mới nhất\n        }\n        return this;\n    }\n    limitFields() {\n        // 3) Filed limiting\n        // 127.0.0.1:3000/api/v1/tours?fields=name,price&limit=5\n        // Với filed thì dấu trừ \"-\" có nghĩa là exclude nó ra khỏi list\n        if (this.queryString.fields) {\n            const fields = this.queryString.fields.split(',').join(' ');\n            this.query = this.query.select(fields);\n        }\n        else {\n            // Hide __v when get data form api\n            // this.query = this.query.select('-__v'); // đã ẩn bằng code bên tourModel\n        }\n        return this;\n    }\n    paginate() {\n        const _page = this.queryString.page * 1 || 1;\n        const _limit = this.queryString.limit * 1 || 20; // pageSize\n        const _skip = (_page - 1) * _limit;\n        // 127.0.0.1:3000/api/v1/tours?page=3&limit=10: 1 -> 10 is page 1, 11 -> 20 is page 2, 21 -> 30 is page 3\n        this.query = this.query.skip(_skip).limit(_limit);\n        // if (this.queryString.page) {\n        //   const numTours = await Tour.countDocuments();\n        //   if (_skip >= numTours) throw new Error('This page does not exist');\n        // }\n        return this;\n    }\n}\nexports[\"default\"] = APIFeatures;\n\n\n//# sourceURL=webpack://shopdienmay/./src/services/apiFeatures.service.ts?");

/***/ }),

/***/ "./src/services/auth.service.ts":
/*!**************************************!*\
  !*** ./src/services/auth.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst config_1 = __webpack_require__(/*! ../config */ \"./src/config/index.ts\");\nconst jwt = tslib_1.__importStar(__webpack_require__(/*! jsonwebtoken */ \"./node_modules/jsonwebtoken/index.js\"));\nconst crypto = tslib_1.__importStar(__webpack_require__(/*! crypto */ \"crypto\"));\nconst bcryptjs_1 = tslib_1.__importDefault(__webpack_require__(/*! bcryptjs */ \"./node_modules/bcryptjs/index.js\"));\nclass AuthService {\n    constructor() {\n        // USED TO GENERATE JWT WITH PAYLOAD AND OPTIONS AS PARAMETERS.\n        // THE PAYLOAD CONTAINS THE DATA WHICH WILL BE SET AS JWT PAYLOAD.\n        // OPTIONS CONTAIN JWT OPTIONS\n        this.generateJWT = function (newUserId = {}, options = {}) {\n            const payload = { id: newUserId };\n            const privateKey = config_1.JWT_SECRET;\n            const defaultOptions = {\n                expiresIn: \"1h\",\n            };\n            return jwt.sign(payload, privateKey, Object.assign(defaultOptions, options));\n        };\n        this.createSendToken = (user, statusCode, response, message) => {\n            // Render secret key in terminal: node -e \"console.log(require('crypto').randomBytes(64).toString('hex'));\"\n            const token = this.generateJWT(user._id);\n            const millisecondsPerDay = 24 * 60 * 60 * 1000;\n            const expirationDate = new Date(); // // Calculate the expiration date\n            const cookieOptions = {\n                //   expiresIn: new Date(\n                // Date.now(JWT_EXPIRES_IN * 24 * 60 * 60 * 1000), // 24h * 60min * (60 * 1000 milliseconds)\n                //   ),\n                expiresIn: expirationDate.setTime(expirationDate.getTime() +\n                    config_1.JWT_EXPIRES_IN * millisecondsPerDay),\n                // secure: true,\n                httpOnly: true, // prevent cross-site scripting attacks\n            };\n            if (false) {}\n            response.cookie(\"jwt\", token, cookieOptions);\n            // Hide password from output (Client) - still see in moongoose <--> Khác với ở trong userModel là mình xoá ở Client và Moongose thôi\n            user.password = undefined;\n            user.passwordConfirm = undefined;\n            // Don't create token when user is Sign Up\n            if (message === \"Sign up successfully!\") {\n                response.status(statusCode).json({\n                    status: \"success\",\n                    message,\n                    data: {\n                        user: user,\n                    },\n                });\n            }\n            response.status(statusCode).json({\n                status: \"success\",\n                message,\n                token,\n                data: {\n                    user: user,\n                },\n            });\n        };\n        this.comparePassword = function (requestBodyPassword, hashedPasswordOnStorage) {\n            return tslib_1.__awaiter(this, void 0, void 0, function* () {\n                return yield bcryptjs_1.default.compare(requestBodyPassword, hashedPasswordOnStorage);\n            });\n        };\n        this.verifyToken = (token, secret) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            try {\n                // Verify the token using the secret key\n                const decoded = jwt.verify(token, secret);\n                console.log(\"decoded\", decoded); // decoded { id: '668f95607b48d3049303159b', iat: 1720767966, exp: 1728543966 }\n                // Return the payload\n                return decoded;\n            }\n            catch (error) {\n                // Handle the error if the token is invalid or expired\n                console.error('Error verifying token:', error);\n                return null;\n            }\n        });\n        this.changedPasswordAfter = function (JWTTimestamp, passwordChangedAt) {\n            console.log('JWTTimestamp', JWTTimestamp);\n            console.log('passwordChangedAt', passwordChangedAt);\n            if (passwordChangedAt) {\n                let millisTimestamp = passwordChangedAt.getTime();\n                let secondsTimestamp = (millisTimestamp / 1000).toString();\n                const changedTimestamp = parseInt(secondsTimestamp, 10);\n                console.log(JWTTimestamp, changedTimestamp);\n                return JWTTimestamp < changedTimestamp; // 100 < 200\n            }\n            // false mean NOT changed the passwordChangedAt\n            return false;\n        };\n        this.createResetPasswordToken = function () {\n            const resetToken = crypto.randomBytes(32).toString('hex');\n            this.passwordResetToken = crypto.createHash('sha256').update(resetToken).digest('hex');\n            // console.log({\n            //     'resetToken': resetToken,\n            //     'passwordResetToken': this.passwordResetToken\n            // });\n            this.passwordResetExpires = Date.now() + 10 * 60 * 1000; // token is available 10 minutes - 1000 is mins\n            return resetToken;\n        };\n    }\n}\nexports[\"default\"] = AuthService;\n\n\n//# sourceURL=webpack://shopdienmay/./src/services/auth.service.ts?");

/***/ }),

/***/ "./src/services/factory.service.ts":
/*!*****************************************!*\
  !*** ./src/services/factory.service.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst appError_1 = tslib_1.__importDefault(__webpack_require__(/*! ../utils/appError */ \"./src/utils/appError.ts\"));\nconst catchAsync_1 = __webpack_require__(/*! ../utils/catchAsync */ \"./src/utils/catchAsync.ts\");\nconst apiFeatures_service_1 = tslib_1.__importDefault(__webpack_require__(/*! ./apiFeatures.service */ \"./src/services/apiFeatures.service.ts\"));\nclass FactoryService {\n    constructor() {\n        this.getAll = (Model) => (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            /*\n                const reviewRouter = express.Router({mergeParams: true});\n                Vì đã có mergeParams ở router, nên nếu ta call /tours/3123asd535(tourId)/review thì nó sẽ chạy getAll thay vì getOneTour theo id\n            */\n            // To allow for nested GET reviews on Tour\n            let filter = {};\n            if (request.params.productId) {\n                filter = { product: request.params.productId };\n                // console.log('filter', filter); // filter { tour: '5c88fa8cf4afda39709c2955' }\n            }\n            console.log('filter', filter);\n            // Execute query\n            const features = new apiFeatures_service_1.default(Model.find(filter), request.query)\n                .filter()\n                .sort()\n                .limitFields()\n                .paginate();\n            // const documents = await features.query.explain();\n            const documents = yield features.query;\n            // Send response\n            response.status(200).json({\n                status: \"success\",\n                requestedAt: request.requestTime,\n                results: documents.length,\n                data: {\n                    data: documents,\n                },\n            });\n        }));\n        this.getOne = (Model, message, populateOptions) => (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // Model.findOne({ _id: request.params.id})\n            // const getOneDocument = await Model.findById(request.params.id).populate('reviews');\n            let query = Model.findById(request.params.id);\n            if (populateOptions) {\n                query = query.populate(populateOptions);\n            }\n            const getOneDocument = yield query;\n            if (!getOneDocument) {\n                return next(new appError_1.default('No document found with that ID', 404));\n            }\n            response.status(200).json({\n                status: \"success\",\n                message,\n                currentDocumentName: `${getOneDocument.name}`,\n                data: {\n                    data: getOneDocument,\n                },\n            });\n        }));\n        this.createOne = (Model, message) => (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            // const newTour = new Tour({});\n            // newTour.save();\n            // console.log('[FactoryService] - Create: ', request.body);\n            const newDocument = yield Model.create(request.body);\n            response.status(201).json({\n                status: 'success',\n                message,\n                data: {\n                    data: newDocument\n                }\n            });\n        }));\n        this.updateOne = (Model, message) => (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const updatedDocument = yield Model.findByIdAndUpdate(request.params.id, request.body, {\n                new: true, // Return the modified document rather than the original\n                runValidators: true, // Validate the updated data against the model's schema\n            });\n            console.log(updatedDocument);\n            if (!updatedDocument) {\n                return next(new appError_1.default('No document found with that ID', 404));\n            }\n            // await updatedDocument.save();\n            updatedDocument.changedAt = Date.now() - 1000; // Add a custom field to track when the review was last changed\n            updatedDocument.save();\n            response.status(200).json({\n                status: \"success\",\n                message,\n                data: {\n                    data: updatedDocument,\n                },\n            });\n        }));\n        this.deleteOne = (Model, message) => (0, catchAsync_1.catchAsync)((request, response, next) => tslib_1.__awaiter(this, void 0, void 0, function* () {\n            const deleteDocument = yield Model.findByIdAndDelete(request.params.id);\n            if (!deleteDocument) {\n                return next(new appError_1.default('No documment found with that ID', 404));\n            }\n            response.status(204).json({\n                status: \"success\",\n                message,\n                data: null\n            });\n        }));\n    }\n}\nexports[\"default\"] = FactoryService;\n\n\n//# sourceURL=webpack://shopdienmay/./src/services/factory.service.ts?");

/***/ }),

/***/ "./src/utils/appError.ts":
/*!*******************************!*\
  !*** ./src/utils/appError.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass AppError extends Error {\n    constructor(message, statusCode) {\n        super(message);\n        this.statusCode = statusCode;\n        this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\n        this.isOperational = true;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\nexports[\"default\"] = AppError;\n\n\n//# sourceURL=webpack://shopdienmay/./src/utils/appError.ts?");

/***/ }),

/***/ "./src/utils/catchAsync.ts":
/*!*********************************!*\
  !*** ./src/utils/catchAsync.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.catchAsync = void 0;\nconst catchAsync = fn => {\n    return (req, res, next) => {\n        fn(req, res, next).catch(next);\n    };\n};\nexports.catchAsync = catchAsync;\n\n\n//# sourceURL=webpack://shopdienmay/./src/utils/catchAsync.ts?");

/***/ }),

/***/ "./src/utils/email.ts":
/*!****************************!*\
  !*** ./src/utils/email.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.sendEmailAsync = void 0;\nconst tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\nconst nodemailer = tslib_1.__importStar(__webpack_require__(/*! nodemailer */ \"./node_modules/nodemailer/lib/nodemailer.js\"));\nconst sendEmailAsync = (options) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {\n    //  Nodemailer =========================================\n    // 1) Create a transporter\n    // const transport = nodemailer.createTransport({\n    //   host: process.env.EMAIL_HOST_MAILTRAP,\n    //   port: EMAIL_PORT_MAILTRAP | 2525, // Hardcode It\n    //   secure: false, // true 465, false for other ports.\n    //   auth: {\n    //     user: process.env.EMAIL_USERNAME_MAILTRAP,\n    //     pass: process.env.EMAIL_PASSWORD_MAILTRAP\n    //   },\n    //   tls: {\n    //     ciphers: \"SSLv3\",\n    //     rejectUnauthorized: false,\n    //   },\n    //   logger: true,\n    //   requireTLS: true,\n    // });\n    // Gmail settings\n    const transport = nodemailer.createTransport({\n        service: 'gmail',\n        host: process.env.EMAIL_HOST_GMAIL,\n        port: 587, // Hardcode It\n        secure: false, // true 465, false for other ports.\n        auth: {\n            user: process.env.EMAIL_USERNAME_GMAIL,\n            pass: process.env.EMAIL_PASSWORD_GMAIL,\n        },\n        tls: {\n            ciphers: \"SSLv3\",\n            rejectUnauthorized: false,\n        },\n        logger: true,\n        requireTLS: true,\n    });\n    // 2) Define the email options\n    const mailOptions = {\n        from: 'Lereste <hohoanghao1999@gmail.com>',\n        to: options.email,\n        subject: options.subject,\n        text: options.message,\n        // html: \"<p>Coi chừng tao</p>\",\n    };\n    // 3) Actually send the email\n    yield transport.sendMail(mailOptions);\n});\nexports.sendEmailAsync = sendEmailAsync;\n// module.exports = sendEmailAsync;\n\n\n//# sourceURL=webpack://shopdienmay/./src/utils/email.ts?");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "./node_modules/helmet/index.cjs":
/*!***************************************!*\
  !*** ./node_modules/helmet/index.cjs ***!
  \***************************************/
/***/ ((module, exports) => {

eval("\n\nObject.defineProperties(exports, {__esModule: {value: true}, [Symbol.toStringTag]: {value: \"Module\"}})\n\nconst dangerouslyDisableDefaultSrc = Symbol(\"dangerouslyDisableDefaultSrc\")\nconst SHOULD_BE_QUOTED = new Set([\"none\", \"self\", \"strict-dynamic\", \"report-sample\", \"inline-speculation-rules\", \"unsafe-inline\", \"unsafe-eval\", \"unsafe-hashes\", \"wasm-unsafe-eval\"])\nconst getDefaultDirectives = () => ({\n\t\"default-src\": [\"'self'\"],\n\t\"base-uri\": [\"'self'\"],\n\t\"font-src\": [\"'self'\", \"https:\", \"data:\"],\n\t\"form-action\": [\"'self'\"],\n\t\"frame-ancestors\": [\"'self'\"],\n\t\"img-src\": [\"'self'\", \"data:\"],\n\t\"object-src\": [\"'none'\"],\n\t\"script-src\": [\"'self'\"],\n\t\"script-src-attr\": [\"'none'\"],\n\t\"style-src\": [\"'self'\", \"https:\", \"'unsafe-inline'\"],\n\t\"upgrade-insecure-requests\": []\n})\nconst dashify = str => str.replace(/[A-Z]/g, capitalLetter => \"-\" + capitalLetter.toLowerCase())\nconst isDirectiveValueInvalid = directiveValue => /;|,/.test(directiveValue)\nconst isDirectiveValueEntryInvalid = directiveValueEntry => SHOULD_BE_QUOTED.has(directiveValueEntry) || directiveValueEntry.startsWith(\"nonce-\") || directiveValueEntry.startsWith(\"sha256-\") || directiveValueEntry.startsWith(\"sha384-\") || directiveValueEntry.startsWith(\"sha512-\")\nconst invalidDirectiveValueError = directiveName => new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(directiveName)}`)\nfunction normalizeDirectives(options) {\n\tconst defaultDirectives = getDefaultDirectives()\n\tconst {useDefaults = true, directives: rawDirectives = defaultDirectives} = options\n\tconst result = new Map()\n\tconst directiveNamesSeen = new Set()\n\tconst directivesExplicitlyDisabled = new Set()\n\tfor (const rawDirectiveName in rawDirectives) {\n\t\tif (!Object.hasOwn(rawDirectives, rawDirectiveName)) {\n\t\t\tcontinue\n\t\t}\n\t\tif (rawDirectiveName.length === 0 || /[^a-zA-Z0-9-]/.test(rawDirectiveName)) {\n\t\t\tthrow new Error(`Content-Security-Policy received an invalid directive name ${JSON.stringify(rawDirectiveName)}`)\n\t\t}\n\t\tconst directiveName = dashify(rawDirectiveName)\n\t\tif (directiveNamesSeen.has(directiveName)) {\n\t\t\tthrow new Error(`Content-Security-Policy received a duplicate directive ${JSON.stringify(directiveName)}`)\n\t\t}\n\t\tdirectiveNamesSeen.add(directiveName)\n\t\tconst rawDirectiveValue = rawDirectives[rawDirectiveName]\n\t\tlet directiveValue\n\t\tif (rawDirectiveValue === null) {\n\t\t\tif (directiveName === \"default-src\") {\n\t\t\t\tthrow new Error(\"Content-Security-Policy needs a default-src but it was set to `null`. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.\")\n\t\t\t}\n\t\t\tdirectivesExplicitlyDisabled.add(directiveName)\n\t\t\tcontinue\n\t\t} else if (typeof rawDirectiveValue === \"string\") {\n\t\t\tdirectiveValue = [rawDirectiveValue]\n\t\t} else if (!rawDirectiveValue) {\n\t\t\tthrow new Error(`Content-Security-Policy received an invalid directive value for ${JSON.stringify(directiveName)}`)\n\t\t} else if (rawDirectiveValue === dangerouslyDisableDefaultSrc) {\n\t\t\tif (directiveName === \"default-src\") {\n\t\t\t\tdirectivesExplicitlyDisabled.add(\"default-src\")\n\t\t\t\tcontinue\n\t\t\t} else {\n\t\t\t\tthrow new Error(`Content-Security-Policy: tried to disable ${JSON.stringify(directiveName)} as if it were default-src; simply omit the key`)\n\t\t\t}\n\t\t} else {\n\t\t\tdirectiveValue = rawDirectiveValue\n\t\t}\n\t\tfor (const element of directiveValue) {\n\t\t\tif (typeof element === \"string\" && (isDirectiveValueInvalid(element) || isDirectiveValueEntryInvalid(element))) {\n\t\t\t\tthrow invalidDirectiveValueError(directiveName)\n\t\t\t}\n\t\t}\n\t\tresult.set(directiveName, directiveValue)\n\t}\n\tif (useDefaults) {\n\t\tObject.entries(defaultDirectives).forEach(([defaultDirectiveName, defaultDirectiveValue]) => {\n\t\t\tif (!result.has(defaultDirectiveName) && !directivesExplicitlyDisabled.has(defaultDirectiveName)) {\n\t\t\t\tresult.set(defaultDirectiveName, defaultDirectiveValue)\n\t\t\t}\n\t\t})\n\t}\n\tif (!result.size) {\n\t\tthrow new Error(\"Content-Security-Policy has no directives. Either set some or disable the header\")\n\t}\n\tif (!result.has(\"default-src\") && !directivesExplicitlyDisabled.has(\"default-src\")) {\n\t\tthrow new Error(\"Content-Security-Policy needs a default-src but none was provided. If you really want to disable it, set it to `contentSecurityPolicy.dangerouslyDisableDefaultSrc`.\")\n\t}\n\treturn result\n}\nfunction getHeaderValue(req, res, normalizedDirectives) {\n\tconst result = []\n\tfor (const [directiveName, rawDirectiveValue] of normalizedDirectives) {\n\t\tlet directiveValue = \"\"\n\t\tfor (const element of rawDirectiveValue) {\n\t\t\tif (typeof element === \"function\") {\n\t\t\t\tconst newElement = element(req, res)\n\t\t\t\tif (isDirectiveValueEntryInvalid(newElement)) {\n\t\t\t\t\treturn invalidDirectiveValueError(directiveName)\n\t\t\t\t}\n\t\t\t\tdirectiveValue += \" \" + newElement\n\t\t\t} else {\n\t\t\t\tdirectiveValue += \" \" + element\n\t\t\t}\n\t\t}\n\t\tif (!directiveValue) {\n\t\t\tresult.push(directiveName)\n\t\t} else if (isDirectiveValueInvalid(directiveValue)) {\n\t\t\treturn invalidDirectiveValueError(directiveName)\n\t\t} else {\n\t\t\tresult.push(`${directiveName}${directiveValue}`)\n\t\t}\n\t}\n\treturn result.join(\";\")\n}\nconst contentSecurityPolicy = function contentSecurityPolicy(options = {}) {\n\tconst headerName = options.reportOnly ? \"Content-Security-Policy-Report-Only\" : \"Content-Security-Policy\"\n\tconst normalizedDirectives = normalizeDirectives(options)\n\treturn function contentSecurityPolicyMiddleware(req, res, next) {\n\t\tconst result = getHeaderValue(req, res, normalizedDirectives)\n\t\tif (result instanceof Error) {\n\t\t\tnext(result)\n\t\t} else {\n\t\t\tres.setHeader(headerName, result)\n\t\t\tnext()\n\t\t}\n\t}\n}\ncontentSecurityPolicy.getDefaultDirectives = getDefaultDirectives\ncontentSecurityPolicy.dangerouslyDisableDefaultSrc = dangerouslyDisableDefaultSrc\n\nconst ALLOWED_POLICIES$2 = new Set([\"require-corp\", \"credentialless\", \"unsafe-none\"])\nfunction getHeaderValueFromOptions$6({policy = \"require-corp\"}) {\n\tif (ALLOWED_POLICIES$2.has(policy)) {\n\t\treturn policy\n\t} else {\n\t\tthrow new Error(`Cross-Origin-Embedder-Policy does not support the ${JSON.stringify(policy)} policy`)\n\t}\n}\nfunction crossOriginEmbedderPolicy(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$6(options)\n\treturn function crossOriginEmbedderPolicyMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Cross-Origin-Embedder-Policy\", headerValue)\n\t\tnext()\n\t}\n}\n\nconst ALLOWED_POLICIES$1 = new Set([\"same-origin\", \"same-origin-allow-popups\", \"unsafe-none\"])\nfunction getHeaderValueFromOptions$5({policy = \"same-origin\"}) {\n\tif (ALLOWED_POLICIES$1.has(policy)) {\n\t\treturn policy\n\t} else {\n\t\tthrow new Error(`Cross-Origin-Opener-Policy does not support the ${JSON.stringify(policy)} policy`)\n\t}\n}\nfunction crossOriginOpenerPolicy(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$5(options)\n\treturn function crossOriginOpenerPolicyMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Cross-Origin-Opener-Policy\", headerValue)\n\t\tnext()\n\t}\n}\n\nconst ALLOWED_POLICIES = new Set([\"same-origin\", \"same-site\", \"cross-origin\"])\nfunction getHeaderValueFromOptions$4({policy = \"same-origin\"}) {\n\tif (ALLOWED_POLICIES.has(policy)) {\n\t\treturn policy\n\t} else {\n\t\tthrow new Error(`Cross-Origin-Resource-Policy does not support the ${JSON.stringify(policy)} policy`)\n\t}\n}\nfunction crossOriginResourcePolicy(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$4(options)\n\treturn function crossOriginResourcePolicyMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Cross-Origin-Resource-Policy\", headerValue)\n\t\tnext()\n\t}\n}\n\nfunction originAgentCluster() {\n\treturn function originAgentClusterMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Origin-Agent-Cluster\", \"?1\")\n\t\tnext()\n\t}\n}\n\nconst ALLOWED_TOKENS = new Set([\"no-referrer\", \"no-referrer-when-downgrade\", \"same-origin\", \"origin\", \"strict-origin\", \"origin-when-cross-origin\", \"strict-origin-when-cross-origin\", \"unsafe-url\", \"\"])\nfunction getHeaderValueFromOptions$3({policy = [\"no-referrer\"]}) {\n\tconst tokens = typeof policy === \"string\" ? [policy] : policy\n\tif (tokens.length === 0) {\n\t\tthrow new Error(\"Referrer-Policy received no policy tokens\")\n\t}\n\tconst tokensSeen = new Set()\n\ttokens.forEach(token => {\n\t\tif (!ALLOWED_TOKENS.has(token)) {\n\t\t\tthrow new Error(`Referrer-Policy received an unexpected policy token ${JSON.stringify(token)}`)\n\t\t} else if (tokensSeen.has(token)) {\n\t\t\tthrow new Error(`Referrer-Policy received a duplicate policy token ${JSON.stringify(token)}`)\n\t\t}\n\t\ttokensSeen.add(token)\n\t})\n\treturn tokens.join(\",\")\n}\nfunction referrerPolicy(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$3(options)\n\treturn function referrerPolicyMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Referrer-Policy\", headerValue)\n\t\tnext()\n\t}\n}\n\nconst DEFAULT_MAX_AGE = 365 * 24 * 60 * 60\nfunction parseMaxAge(value = DEFAULT_MAX_AGE) {\n\tif (value >= 0 && Number.isFinite(value)) {\n\t\treturn Math.floor(value)\n\t} else {\n\t\tthrow new Error(`Strict-Transport-Security: ${JSON.stringify(value)} is not a valid value for maxAge. Please choose a positive integer.`)\n\t}\n}\nfunction getHeaderValueFromOptions$2(options) {\n\tif (\"maxage\" in options) {\n\t\tthrow new Error(\"Strict-Transport-Security received an unsupported property, `maxage`. Did you mean to pass `maxAge`?\")\n\t}\n\tif (\"includeSubdomains\" in options) {\n\t\tthrow new Error('Strict-Transport-Security middleware should use `includeSubDomains` instead of `includeSubdomains`. (The correct one has an uppercase \"D\".)')\n\t}\n\tconst directives = [`max-age=${parseMaxAge(options.maxAge)}`]\n\tif (options.includeSubDomains === undefined || options.includeSubDomains) {\n\t\tdirectives.push(\"includeSubDomains\")\n\t}\n\tif (options.preload) {\n\t\tdirectives.push(\"preload\")\n\t}\n\treturn directives.join(\"; \")\n}\nfunction strictTransportSecurity(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$2(options)\n\treturn function strictTransportSecurityMiddleware(_req, res, next) {\n\t\tres.setHeader(\"Strict-Transport-Security\", headerValue)\n\t\tnext()\n\t}\n}\n\nfunction xContentTypeOptions() {\n\treturn function xContentTypeOptionsMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-Content-Type-Options\", \"nosniff\")\n\t\tnext()\n\t}\n}\n\nfunction xDnsPrefetchControl(options = {}) {\n\tconst headerValue = options.allow ? \"on\" : \"off\"\n\treturn function xDnsPrefetchControlMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-DNS-Prefetch-Control\", headerValue)\n\t\tnext()\n\t}\n}\n\nfunction xDownloadOptions() {\n\treturn function xDownloadOptionsMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-Download-Options\", \"noopen\")\n\t\tnext()\n\t}\n}\n\nfunction getHeaderValueFromOptions$1({action = \"sameorigin\"}) {\n\tconst normalizedAction = typeof action === \"string\" ? action.toUpperCase() : action\n\tswitch (normalizedAction) {\n\t\tcase \"SAME-ORIGIN\":\n\t\t\treturn \"SAMEORIGIN\"\n\t\tcase \"DENY\":\n\t\tcase \"SAMEORIGIN\":\n\t\t\treturn normalizedAction\n\t\tdefault:\n\t\t\tthrow new Error(`X-Frame-Options received an invalid action ${JSON.stringify(action)}`)\n\t}\n}\nfunction xFrameOptions(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions$1(options)\n\treturn function xFrameOptionsMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-Frame-Options\", headerValue)\n\t\tnext()\n\t}\n}\n\nconst ALLOWED_PERMITTED_POLICIES = new Set([\"none\", \"master-only\", \"by-content-type\", \"all\"])\nfunction getHeaderValueFromOptions({permittedPolicies = \"none\"}) {\n\tif (ALLOWED_PERMITTED_POLICIES.has(permittedPolicies)) {\n\t\treturn permittedPolicies\n\t} else {\n\t\tthrow new Error(`X-Permitted-Cross-Domain-Policies does not support ${JSON.stringify(permittedPolicies)}`)\n\t}\n}\nfunction xPermittedCrossDomainPolicies(options = {}) {\n\tconst headerValue = getHeaderValueFromOptions(options)\n\treturn function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-Permitted-Cross-Domain-Policies\", headerValue)\n\t\tnext()\n\t}\n}\n\nfunction xPoweredBy() {\n\treturn function xPoweredByMiddleware(_req, res, next) {\n\t\tres.removeHeader(\"X-Powered-By\")\n\t\tnext()\n\t}\n}\n\nfunction xXssProtection() {\n\treturn function xXssProtectionMiddleware(_req, res, next) {\n\t\tres.setHeader(\"X-XSS-Protection\", \"0\")\n\t\tnext()\n\t}\n}\n\nfunction getMiddlewareFunctionsFromOptions(options) {\n\tconst result = []\n\tswitch (options.contentSecurityPolicy) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(contentSecurityPolicy())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(contentSecurityPolicy(options.contentSecurityPolicy))\n\t\t\tbreak\n\t}\n\tswitch (options.crossOriginEmbedderPolicy) {\n\t\tcase undefined:\n\t\tcase false:\n\t\t\tbreak\n\t\tcase true:\n\t\t\tresult.push(crossOriginEmbedderPolicy())\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(crossOriginEmbedderPolicy(options.crossOriginEmbedderPolicy))\n\t\t\tbreak\n\t}\n\tswitch (options.crossOriginOpenerPolicy) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(crossOriginOpenerPolicy())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(crossOriginOpenerPolicy(options.crossOriginOpenerPolicy))\n\t\t\tbreak\n\t}\n\tswitch (options.crossOriginResourcePolicy) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(crossOriginResourcePolicy())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(crossOriginResourcePolicy(options.crossOriginResourcePolicy))\n\t\t\tbreak\n\t}\n\tswitch (options.originAgentCluster) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(originAgentCluster())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tconsole.warn(\"Origin-Agent-Cluster does not take options. Remove the property to silence this warning.\")\n\t\t\tresult.push(originAgentCluster())\n\t\t\tbreak\n\t}\n\tswitch (options.referrerPolicy) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(referrerPolicy())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(referrerPolicy(options.referrerPolicy))\n\t\t\tbreak\n\t}\n\tif (\"strictTransportSecurity\" in options && \"hsts\" in options) {\n\t\tthrow new Error(\"Strict-Transport-Security option was specified twice. Remove `hsts` to silence this warning.\")\n\t}\n\tconst strictTransportSecurityOption = options.strictTransportSecurity ?? options.hsts\n\tswitch (strictTransportSecurityOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(strictTransportSecurity())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(strictTransportSecurity(strictTransportSecurityOption))\n\t\t\tbreak\n\t}\n\tif (\"xContentTypeOptions\" in options && \"noSniff\" in options) {\n\t\tthrow new Error(\"X-Content-Type-Options option was specified twice. Remove `noSniff` to silence this warning.\")\n\t}\n\tconst xContentTypeOptionsOption = options.xContentTypeOptions ?? options.noSniff\n\tswitch (xContentTypeOptionsOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xContentTypeOptions())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tconsole.warn(\"X-Content-Type-Options does not take options. Remove the property to silence this warning.\")\n\t\t\tresult.push(xContentTypeOptions())\n\t\t\tbreak\n\t}\n\tif (\"xDnsPrefetchControl\" in options && \"dnsPrefetchControl\" in options) {\n\t\tthrow new Error(\"X-DNS-Prefetch-Control option was specified twice. Remove `dnsPrefetchControl` to silence this warning.\")\n\t}\n\tconst xDnsPrefetchControlOption = options.xDnsPrefetchControl ?? options.dnsPrefetchControl\n\tswitch (xDnsPrefetchControlOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xDnsPrefetchControl())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(xDnsPrefetchControl(xDnsPrefetchControlOption))\n\t\t\tbreak\n\t}\n\tif (\"xDownloadOptions\" in options && \"ieNoOpen\" in options) {\n\t\tthrow new Error(\"X-Download-Options option was specified twice. Remove `ieNoOpen` to silence this warning.\")\n\t}\n\tconst xDownloadOptionsOption = options.xDownloadOptions ?? options.ieNoOpen\n\tswitch (xDownloadOptionsOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xDownloadOptions())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tconsole.warn(\"X-Download-Options does not take options. Remove the property to silence this warning.\")\n\t\t\tresult.push(xDownloadOptions())\n\t\t\tbreak\n\t}\n\tif (\"xFrameOptions\" in options && \"frameguard\" in options) {\n\t\tthrow new Error(\"X-Frame-Options option was specified twice. Remove `frameguard` to silence this warning.\")\n\t}\n\tconst xFrameOptionsOption = options.xFrameOptions ?? options.frameguard\n\tswitch (xFrameOptionsOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xFrameOptions())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(xFrameOptions(xFrameOptionsOption))\n\t\t\tbreak\n\t}\n\tif (\"xPermittedCrossDomainPolicies\" in options && \"permittedCrossDomainPolicies\" in options) {\n\t\tthrow new Error(\"X-Permitted-Cross-Domain-Policies option was specified twice. Remove `permittedCrossDomainPolicies` to silence this warning.\")\n\t}\n\tconst xPermittedCrossDomainPoliciesOption = options.xPermittedCrossDomainPolicies ?? options.permittedCrossDomainPolicies\n\tswitch (xPermittedCrossDomainPoliciesOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xPermittedCrossDomainPolicies())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tresult.push(xPermittedCrossDomainPolicies(xPermittedCrossDomainPoliciesOption))\n\t\t\tbreak\n\t}\n\tif (\"xPoweredBy\" in options && \"hidePoweredBy\" in options) {\n\t\tthrow new Error(\"X-Powered-By option was specified twice. Remove `hidePoweredBy` to silence this warning.\")\n\t}\n\tconst xPoweredByOption = options.xPoweredBy ?? options.hidePoweredBy\n\tswitch (xPoweredByOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xPoweredBy())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tconsole.warn(\"X-Powered-By does not take options. Remove the property to silence this warning.\")\n\t\t\tresult.push(xPoweredBy())\n\t\t\tbreak\n\t}\n\tif (\"xXssProtection\" in options && \"xssFilter\" in options) {\n\t\tthrow new Error(\"X-XSS-Protection option was specified twice. Remove `xssFilter` to silence this warning.\")\n\t}\n\tconst xXssProtectionOption = options.xXssProtection ?? options.xssFilter\n\tswitch (xXssProtectionOption) {\n\t\tcase undefined:\n\t\tcase true:\n\t\t\tresult.push(xXssProtection())\n\t\t\tbreak\n\t\tcase false:\n\t\t\tbreak\n\t\tdefault:\n\t\t\tconsole.warn(\"X-XSS-Protection does not take options. Remove the property to silence this warning.\")\n\t\t\tresult.push(xXssProtection())\n\t\t\tbreak\n\t}\n\treturn result\n}\nconst helmet = Object.assign(\n\tfunction helmet(options = {}) {\n\t\t// People should be able to pass an options object with no prototype,\n\t\t// so we want this optional chaining.\n\t\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n\t\tif (options.constructor?.name === \"IncomingMessage\") {\n\t\t\tthrow new Error(\"It appears you have done something like `app.use(helmet)`, but it should be `app.use(helmet())`.\")\n\t\t}\n\t\tconst middlewareFunctions = getMiddlewareFunctionsFromOptions(options)\n\t\treturn function helmetMiddleware(req, res, next) {\n\t\t\tlet middlewareIndex = 0\n\t\t\t;(function internalNext(err) {\n\t\t\t\tif (err) {\n\t\t\t\t\tnext(err)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconst middlewareFunction = middlewareFunctions[middlewareIndex]\n\t\t\t\tif (middlewareFunction) {\n\t\t\t\t\tmiddlewareIndex++\n\t\t\t\t\tmiddlewareFunction(req, res, internalNext)\n\t\t\t\t} else {\n\t\t\t\t\tnext()\n\t\t\t\t}\n\t\t\t})()\n\t\t}\n\t},\n\t{\n\t\tcontentSecurityPolicy,\n\t\tcrossOriginEmbedderPolicy,\n\t\tcrossOriginOpenerPolicy,\n\t\tcrossOriginResourcePolicy,\n\t\toriginAgentCluster,\n\t\treferrerPolicy,\n\t\tstrictTransportSecurity,\n\t\txContentTypeOptions,\n\t\txDnsPrefetchControl,\n\t\txDownloadOptions,\n\t\txFrameOptions,\n\t\txPermittedCrossDomainPolicies,\n\t\txPoweredBy,\n\t\txXssProtection,\n\t\t// Legacy aliases\n\t\tdnsPrefetchControl: xDnsPrefetchControl,\n\t\txssFilter: xXssProtection,\n\t\tpermittedCrossDomainPolicies: xPermittedCrossDomainPolicies,\n\t\tieNoOpen: xDownloadOptions,\n\t\tnoSniff: xContentTypeOptions,\n\t\tframeguard: xFrameOptions,\n\t\thidePoweredBy: xPoweredBy,\n\t\thsts: strictTransportSecurity\n\t}\n)\n\nexports.contentSecurityPolicy = contentSecurityPolicy\nexports.crossOriginEmbedderPolicy = crossOriginEmbedderPolicy\nexports.crossOriginOpenerPolicy = crossOriginOpenerPolicy\nexports.crossOriginResourcePolicy = crossOriginResourcePolicy\nexports[\"default\"] = helmet\nexports.dnsPrefetchControl = xDnsPrefetchControl\nexports.frameguard = xFrameOptions\nexports.hidePoweredBy = xPoweredBy\nexports.hsts = strictTransportSecurity\nexports.ieNoOpen = xDownloadOptions\nexports.noSniff = xContentTypeOptions\nexports.originAgentCluster = originAgentCluster\nexports.permittedCrossDomainPolicies = xPermittedCrossDomainPolicies\nexports.referrerPolicy = referrerPolicy\nexports.strictTransportSecurity = strictTransportSecurity\nexports.xContentTypeOptions = xContentTypeOptions\nexports.xDnsPrefetchControl = xDnsPrefetchControl\nexports.xDownloadOptions = xDownloadOptions\nexports.xFrameOptions = xFrameOptions\nexports.xPermittedCrossDomainPolicies = xPermittedCrossDomainPolicies\nexports.xPoweredBy = xPoweredBy\nexports.xXssProtection = xXssProtection\nexports.xssFilter = xXssProtection\n\nmodule.exports = exports.default\nmodule.exports[\"default\"] = module.exports\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/helmet/index.cjs?");

/***/ }),

/***/ "./node_modules/sharp/lib/index.js":
/*!*****************************************!*\
  !*** ./node_modules/sharp/lib/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/sharp/lib/index.js?");

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.mjs":
/*!******************************************!*\
  !*** ./node_modules/tslib/tslib.es6.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __addDisposableResource: () => (/* binding */ __addDisposableResource),\n/* harmony export */   __assign: () => (/* binding */ __assign),\n/* harmony export */   __asyncDelegator: () => (/* binding */ __asyncDelegator),\n/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),\n/* harmony export */   __asyncValues: () => (/* binding */ __asyncValues),\n/* harmony export */   __await: () => (/* binding */ __await),\n/* harmony export */   __awaiter: () => (/* binding */ __awaiter),\n/* harmony export */   __classPrivateFieldGet: () => (/* binding */ __classPrivateFieldGet),\n/* harmony export */   __classPrivateFieldIn: () => (/* binding */ __classPrivateFieldIn),\n/* harmony export */   __classPrivateFieldSet: () => (/* binding */ __classPrivateFieldSet),\n/* harmony export */   __createBinding: () => (/* binding */ __createBinding),\n/* harmony export */   __decorate: () => (/* binding */ __decorate),\n/* harmony export */   __disposeResources: () => (/* binding */ __disposeResources),\n/* harmony export */   __esDecorate: () => (/* binding */ __esDecorate),\n/* harmony export */   __exportStar: () => (/* binding */ __exportStar),\n/* harmony export */   __extends: () => (/* binding */ __extends),\n/* harmony export */   __generator: () => (/* binding */ __generator),\n/* harmony export */   __importDefault: () => (/* binding */ __importDefault),\n/* harmony export */   __importStar: () => (/* binding */ __importStar),\n/* harmony export */   __makeTemplateObject: () => (/* binding */ __makeTemplateObject),\n/* harmony export */   __metadata: () => (/* binding */ __metadata),\n/* harmony export */   __param: () => (/* binding */ __param),\n/* harmony export */   __propKey: () => (/* binding */ __propKey),\n/* harmony export */   __read: () => (/* binding */ __read),\n/* harmony export */   __rest: () => (/* binding */ __rest),\n/* harmony export */   __rewriteRelativeImportExtension: () => (/* binding */ __rewriteRelativeImportExtension),\n/* harmony export */   __runInitializers: () => (/* binding */ __runInitializers),\n/* harmony export */   __setFunctionName: () => (/* binding */ __setFunctionName),\n/* harmony export */   __spread: () => (/* binding */ __spread),\n/* harmony export */   __spreadArray: () => (/* binding */ __spreadArray),\n/* harmony export */   __spreadArrays: () => (/* binding */ __spreadArrays),\n/* harmony export */   __values: () => (/* binding */ __values),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nfunction __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nfunction __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nfunction __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nfunction __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nfunction __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nfunction __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nvar __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nfunction __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nfunction __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nfunction __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nfunction __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nfunction __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nfunction __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nfunction __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nfunction __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nfunction __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nfunction __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n});\n\n\n//# sourceURL=webpack://shopdienmay/./node_modules/tslib/tslib.es6.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/server.ts");
/******/ 	
/******/ })()
;